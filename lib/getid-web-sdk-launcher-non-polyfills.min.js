!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).getidWebSdk={})}(this,(function(e){"use strict";function n(e,n,t,i){return new(t||(t=Promise))((function(o,r){function c(e){try{d(i.next(e))}catch(e){r(e)}}function s(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,s)}d((i=i.apply(e,n||[])).next())}))}let t=(e,i,o)=>n(void 0,void 0,void 0,(function*(){let r={responseCode:400};try{const c={"x-web-sdk-launcher-version":"3.1.1"},s=new URL(`${e}/sdk/v2/script-link`);i&&s.searchParams.append("flowName",i),o&&s.searchParams.append("experimentalKey",o),r=yield fetch(s.toString(),{headers:c}).then((e=>e.json())),r.scriptLink&&(t=()=>n(void 0,void 0,void 0,(function*(){return r})))}catch(e){console.error(e)}return r}));e.init=function(e){const n="v7.5.5",i="-non-polyfills";return new Promise(((o,r)=>{t(e.apiUrl,e.flowName,e.experimentalKey).then((({scriptLink:t=""})=>{t=function(e,{fallbackVersion:n,scriptSuffix:t,versionSuffix:i,defaultLink:o}){if(!e)return o;const r=/(v[0-9]+(?:\.[0-9]+(?:\.[0-9]+)?)?)(-rc)?\.min.js/,[,c=n,s=!1]=e.match(r)||[];return e.replace(r,`${c}${i}${s?"-rc":""}${t}.min.js`)}(t,{fallbackVersion:n,scriptSuffix:i,versionSuffix:"",defaultLink:"https://cdn.getid.cloud/sdk/getid-web-sdk-v7.5.5-non-polyfills.min.js"});const c=document.createElement("script");c.setAttribute("async",""),c.src=t,document.getElementsByTagName("body")[0].appendChild(c),c.onload=()=>{window.getidWebSdk&&window.getidWebSdk.init(e).then((e=>o(e))).catch((e=>r(e)))},c.onerror=e=>r(e)})).catch((e=>{console.log(e),r(e)}))}))}}));